<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Page</title>
    <link rel="stylesheet" href="css/styles.css">
</head> 
    <body>
      <div class="container">
        <div class="form">
            <form>
                <h1>VIT-EASE</h1>
                <h2>Sign Up</h2>
                <input type="text" id="gmail" placeholder="gmail"></input>
                <input type="text" id="password" placeholder="password"></input>
                <input type="text" id="display_name" placeholder="display_name"></input>
                <input type="text" id="type" placeholder="type"></input>
                <input type="text" id="gender" placeholder="gender"></input>
            </form>
            <button id="register">Sign Up</button>
            <p class="login-link">Already have an account? <a href="login.html">Login</a></p>
            </div>
            
      </div>
    </body>
</html>





<script>
  document.addEventListener("DOMContentLoaded", () => {
      document.getElementById("register").addEventListener("click", async (event) => {
          try {
            const gmail = document.getElementById("gmail").value;
        const password = document.getElementById("password").value;
        const display_name = document.getElementById("display_name").value;
        const type = document.getElementById("type").value;
        const gender = document.getElementById("gender").value;

        const data = {
            "gmail":gmail,
            "display_name":display_name,
             "type":type,"gender":gender, "password":password
        };
    
        try {
          const response = await fetch("https://vit-ease.shivamkrthakur.in/api/v1/enter/register", {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify(data),
          });
              const responseData = await response.json();
              console.log(responseData);
              if (responseData.status===201) {
                  document.cookie = `accessToken=${responseData.data.accessToken}; path=/; secure; HttpOnly`;
                  document.cookie = `refreshToken=${responseData.data.refreshToken}; path=/; secure; HttpOnly`;
                  window.location.href = "discussion.html";
              } else {
                  console.log("Login Failed");
              }
          } catch (error) {
              console.error("An error occurred:", error);
          }
      });
  });
</script>